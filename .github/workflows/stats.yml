name: Project Statistics

on:
  schedule:
    - cron: '0 0 * * 0'  # ÐšÐ°Ð¶Ð´Ð¾Ðµ Ð²Ð¾ÑÐºÑ€ÐµÑÐµÐ½ÑŒÐµ Ð² Ð¿Ð¾Ð»Ð½Ð¾Ñ‡ÑŒ
  workflow_dispatch:  # ÐŸÐ¾Ð·Ð²Ð¾Ð»ÑÐµÑ‚ Ð·Ð°Ð¿ÑƒÑÐºÐ°Ñ‚ÑŒ Ð²Ñ€ÑƒÑ‡Ð½ÑƒÑŽ

jobs:
  stats:
    name: Generate project statistics
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout code
        uses: actions/checkout@v4
        
      - name: Calculate statistics
        run: |
          echo "# ðŸ“Š PRIME360.AI - Ð¡Ñ‚Ð°Ñ‚Ð¸ÑÑ‚Ð¸ÐºÐ° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°" > stats.txt
          echo "" >> stats.txt
          echo "Ð”Ð°Ñ‚Ð°: $(date)" >> stats.txt
          echo "" >> stats.txt
          
          echo "## ðŸ“ Ð¡Ñ‚Ñ€ÑƒÐºÑ‚ÑƒÑ€Ð° Ð¿Ñ€Ð¾ÐµÐºÑ‚Ð°" >> stats.txt
          echo "" >> stats.txt
          echo "- HTML ÑÑ‚Ñ€Ð°Ð½Ð¸Ñ†: $(find . -name '*.html' | wc -l)" >> stats.txt
          echo "- CSS Ñ„Ð°Ð¹Ð»Ð¾Ð²: $(find . -name '*.css' | wc -l)" >> stats.txt
          echo "- JavaScript Ñ„Ð°Ð¹Ð»Ð¾Ð²: $(find . -name '*.js' | wc -l)" >> stats.txt
          echo "- Markdown Ð´Ð¾ÐºÑƒÐ¼ÐµÐ½Ñ‚Ð¾Ð²: $(find . -name '*.md' | wc -l)" >> stats.txt
          echo "" >> stats.txt
          
          echo "## ðŸ“ Ð¡Ñ‚Ñ€Ð¾ÐºÐ¸ ÐºÐ¾Ð´Ð°" >> stats.txt
          echo "" >> stats.txt
          echo "\`\`\`" >> stats.txt
          find . -name '*.html' -o -name '*.css' -o -name '*.js' | xargs wc -l | tail -1 >> stats.txt
          echo "\`\`\`" >> stats.txt
          echo "" >> stats.txt
          
          echo "## ðŸ“„ Ð¡Ð¿Ð¸ÑÐ¾Ðº Ñ„Ð°Ð¹Ð»Ð¾Ð²" >> stats.txt
          echo "" >> stats.txt
          echo "### HTML:" >> stats.txt
          find . -name '*.html' | sort >> stats.txt
          echo "" >> stats.txt
          echo "### CSS:" >> stats.txt
          find ./css -name '*.css' | sort >> stats.txt
          echo "" >> stats.txt
          echo "### JavaScript:" >> stats.txt
          find ./js -name '*.js' | sort >> stats.txt
          
          cat stats.txt
          
      - name: Upload statistics
        uses: actions/upload-artifact@v4
        with:
          name: project-stats
          path: stats.txt
          retention-days: 30

