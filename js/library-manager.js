// Library Manager - –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–±–ª–∏–æ—Ç–µ–∫–æ–π –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤

// –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –±–∏–±–ª–∏–æ—Ç–µ–∫–µ
const libraryData = {
    normative: {
        title: "–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –†–ö",
        icon: "üìã",
        folders: [
            {
                name: "–ö–í–≠",
                icon: "üìÅ",
                files: [
                    {
                        name: "–ü—Ä–∞–≤–∏–ª–∞ –ø–æ –ö–í–≠ —Å –∏–∑–º. –Ω–∞ 26.02.2023 –≥–æ–¥.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–ö–í–≠/–ü—Ä–∞–≤–∏–ª–∞ –ø–æ –ö–í–≠ —Å –∏–∑–º. –Ω–∞ 26.02.2023 –≥–æ–¥.pdf",
                        type: "PDF",
                        size: "2.1 MB",
                        date: "26.02.2023"
                    }
                ]
            },
            {
                name: "–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ",
                icon: "üìÅ",
                files: [
                    {
                        name: "–ó–†–ö –û–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π, –≥—Ä–∞–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ò–∑–º –Ω–∞ 07.03.2023.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ/–ó–†–ö –û–± –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–Ω–æ–π, –≥—Ä–∞–¥–æ—Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –∏ —Å—Ç—Ä–æ–∏—Ç–µ–ª—å–Ω–æ–π –¥–µ—è—Ç–µ–ª—å–Ω–æ—Å—Ç–∏. –ò–∑–º –Ω–∞ 07.03.2023.pdf",
                        type: "PDF",
                        size: "3.5 MB",
                        date: "07.03.2023"
                    },
                    {
                        name: "–ù–î–¶–° –†–ö 8.01-08-2022. –ü–æ—Ä—è–¥–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ/–ù–î–¶–° –†–ö 8.01-08-2022. –ü–æ—Ä—è–¥–æ–∫ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è.pdf",
                        type: "PDF",
                        size: "1.8 MB",
                        date: "08.01.2022"
                    },
                    {
                        name: "–ü—Ä–∏–∫–∞–∑ 165. –ü—Ä–∞–≤–∏–ª–∞ –æ–ø—Ä–µ–¥.—Ç–µ—Ö.—Å–ª–æ–∂. –ò–∑–º.–Ω–∞ 14.02.2023.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ/–ü—Ä–∏–∫–∞–∑ 165. –ü—Ä–∞–≤–∏–ª–∞ –æ–ø—Ä–µ–¥.—Ç–µ—Ö.—Å–ª–æ–∂. –ò–∑–º.–Ω–∞ 14.02.2023.pdf",
                        type: "PDF",
                        size: "2.3 MB",
                        date: "14.02.2023"
                    },
                    {
                        name: "–°–ù –†–ö 1.02-03-2022. 12.01.2023.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–°—Ç—Ä–æ–∏—Ç–µ–ª—å—Å—Ç–≤–æ/–°–ù –†–ö 1.02-03-2022. 12.01.2023.pdf",
                        type: "PDF",
                        size: "4.2 MB",
                        date: "12.01.2023"
                    }
                ]
            },
            {
                name: "–≠–∫–æ–ª–æ–≥–∏—è",
                icon: "üìÅ",
                files: [
                    {
                        name: "–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—é —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–µ.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–≠–∫–æ–ª–æ–≥–∏—è/–ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–∏ –∏ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏—é —ç–∫–æ–ª–æ–≥–∏—á–µ—Å–∫–æ–π –æ—Ü–µ–Ω–∫–µ.pdf",
                        type: "PDF",
                        size: "1.5 MB",
                        date: "05.09.2023"
                    },
                    {
                        name: "–û —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø–æ–ª–Ω–æ–º–æ—á–∏–π.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–≠–∫–æ–ª–æ–≥–∏—è/–û —Ä–∞—Å–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–∏ –ø–æ–ª–Ω–æ–º–æ—á–∏–π.pdf",
                        type: "PDF",
                        size: "0.9 MB",
                        date: "02.01.2021"
                    },
                    {
                        name: "–≠–ö –†–ö –Ω–∞ 05.09.2023–≥.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–≠–∫–æ–ª–æ–≥–∏—è/–≠–ö –†–ö –Ω–∞ 05.09.2023–≥.pdf",
                        type: "PDF",
                        size: "3.1 MB",
                        date: "05.09.2023"
                    },
                    {
                        name: "–≠–ö –†–ö –æ—Ç 02.01.2021 ‚Ññ 400-VI —Å –∏–∑–º 07.03.2023.pdf",
                        path: "documents/–ù–æ—Ä–º–∞—Ç–∏–≤–Ω—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã/–≠–∫–æ–ª–æ–≥–∏—è/–≠–ö –†–ö –æ—Ç 02.01.2021 ‚Ññ 400-VI  —Å –∏–∑–º 07.03.2023.pdf",
                        type: "PDF",
                        size: "2.7 MB",
                        date: "07.03.2023"
                    }
                ]
            }
        ]
    },
    standards: {
        title: "–°—Ç–∞–Ω–¥–∞—Ä—Ç—ã, —Ä–µ–≥–ª–∞–º–µ–Ω—Ç—ã, –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏–∏",
        icon: "üìÑ",
        folders: []
    },
    items: {
        title: "–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏",
        icon: "üì¶",
        folders: [
            {
                name: "–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–∞ –∏ —É—á–µ–±–Ω–∏–∫–∏",
                icon: "üìÅ",
                files: [
                    {
                        name: "PMI –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫ –°–≤–æ–¥—É –∑–Ω–∞–Ω–∏–π –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ PMBOK 6) 2017.pdf",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/PMI –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –∫ –°–≤–æ–¥—É –∑–Ω–∞–Ω–∏–π –ø–æ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—é –ø—Ä–æ–µ–∫—Ç–∞–º–∏ (–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ PMBOK 6) 2017.pdf",
                        type: "PDF",
                        size: "15.2 MB",
                        date: "2017"
                    },
                    {
                        name: "–ó—É–±—Ä–∏—Ü–∫–∏–π –ê.–ê. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Microsoft Project 2016.pdf",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/–ó—É–±—Ä–∏—Ü–∫–∏–π –ê.–ê. 2016 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Microsoft Project 2016.pdf",
                        type: "PDF",
                        size: "8.5 MB",
                        date: "2016"
                    },
                    {
                        name: "Project Management Processes.pdf",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/13 –ì—Ä—É–ø–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ/Project management processes.pdf",
                        type: "PDF",
                        size: "2.1 MB",
                        date: "2024"
                    }
                ]
            },
            {
                name: "–£—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã",
                icon: "üìÅ",
                files: [
                    {
                        name: "1. –í–≤–µ–¥–µ–Ω–∏–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/1 –í–≤–µ–¥–µ–Ω–∏–µ –≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏.zip",
                        type: "ZIP",
                        size: "~50 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "134 —Ñ–∞–π–ª–∞"
                    },
                    {
                        name: "2. –†–æ–ª—å –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/2 –†–æ–ª—å –†—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è –ø—Ä–æ–µ–∫—Ç–æ–≤.zip",
                        type: "ZIP",
                        size: "~8 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "21 —Ñ–∞–π–ª"
                    },
                    {
                        name: "3. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/3 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π –ø—Ä–æ–µ–∫—Ç–∞.zip",
                        type: "ZIP",
                        size: "~40 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "102 —Ñ–∞–π–ª–∞"
                    },
                    {
                        name: "4. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/4 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∏–Ω—Ç–µ—Ä–µ—Å–æ–≤–∞–Ω–Ω—ã–º–∏ —Å—Ç–æ—Ä–æ–Ω–∞–º–∏.zip",
                        type: "ZIP",
                        size: "~15 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "38 —Ñ–∞–π–ª–æ–≤"
                    },
                    {
                        name: "5. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–æ–≤",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/5 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–æ–¥–µ—Ä–∂–∞–Ω–∏–µ–º –ø—Ä–æ–µ–∫—Ç–æ–≤.zip",
                        type: "ZIP",
                        size: "~16 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "41 —Ñ–∞–π–ª"
                    },
                    {
                        name: "6. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/6 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∞—Å–ø–∏—Å–∞–Ω–∏–µ–º.zip",
                        type: "ZIP",
                        size: "~28 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "73 —Ñ–∞–π–ª–∞"
                    },
                    {
                        name: "7. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –ø—Ä–æ–µ–∫—Ç–∞",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/7 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å—Ç–æ–∏–º–æ—Å—Ç—å—é –ø—Ä–æ–µ–∫—Ç–∞.zip",
                        type: "ZIP",
                        size: "~18 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "47 —Ñ–∞–π–ª–æ–≤"
                    },
                    {
                        name: "8. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ–µ–∫—Ç–∞",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/8 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–∞—á–µ—Å—Ç–≤–æ–º –ø—Ä–æ–µ–∫—Ç–∞.zip",
                        type: "ZIP",
                        size: "~13 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "34 —Ñ–∞–π–ª–∞"
                    },
                    {
                        name: "9. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/9 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–∞–º–∏.zip",
                        type: "ZIP",
                        size: "~20 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "53 —Ñ–∞–π–ª–∞"
                    },
                    {
                        name: "10. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/10 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∫–æ–º–º—É–Ω–∏–∫–∞—Ü–∏—è–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.zip",
                        type: "ZIP",
                        size: "~12 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "32 —Ñ–∞–π–ª–∞"
                    },
                    {
                        name: "11. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/11 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Ä–∏—Å–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.zip",
                        type: "ZIP",
                        size: "~25 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "66 —Ñ–∞–π–ª–æ–≤"
                    },
                    {
                        name: "12. –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/12 –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –∑–∞–∫—É–ø–∫–∞–º–∏ –ø—Ä–æ–µ–∫—Ç–∞.zip",
                        type: "ZIP",
                        size: "~7 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "19 —Ñ–∞–π–ª–æ–≤"
                    },
                    {
                        name: "13. –ì—Ä—É–ø–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/13 –ì—Ä—É–ø–ø—ã –ø—Ä–æ—Ü–µ—Å—Å–æ–≤ —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º –∏ –∏—Ö –≤–∑–∞–∏–º–æ–¥–µ–π—Å—Ç–≤–∏–µ.zip",
                        type: "ZIP",
                        size: "~8 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "20 —Ñ–∞–π–ª–æ–≤"
                    },
                    {
                        name: "–¢–µ—Ä–º–∏–Ω—ã –∏ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è",
                        path: "documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/—Ç–µ—Ä–º–∏–Ω—ã.zip",
                        type: "ZIP",
                        size: "~22 MB",
                        date: "2024",
                        isFolder: true,
                        filesCount: "57 —Ñ–∞–π–ª–æ–≤"
                    }
                ]
            }
        ]
    }
};

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è –∏–∫–æ–Ω–∫–∏ —Ñ–∞–π–ª–∞ –ø–æ —Ç–∏–ø—É
function getFileIcon(type) {
    const icons = {
        'PDF': 'üìÑ',
        'DOC': 'üìù',
        'DOCX': 'üìù',
        'XLSX': 'üìä',
        'XLS': 'üìä',
        'DWG': 'üìê',
        'JPG': 'üñºÔ∏è',
        'PNG': 'üñºÔ∏è',
        '–ü–ê–ü–ö–ê': 'üìÅ',
        '–ò–ù–§–û': '‚ÑπÔ∏è',
        'ZIP': 'üì¶'
    };
    return icons[type.toUpperCase()] || 'üìÑ';
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–ª—É—á–µ–Ω–∏—è —Ü–≤–µ—Ç–∞ –∏–∫–æ–Ω–∫–∏ –ø–æ —Ç–∏–ø—É –ø–∞–ø–∫–∏
function getFolderIconColor(categoryType) {
    const colors = {
        'normative': '',
        'standards': 'purple',
        'items': 'orange'
    };
    return colors[categoryType] || '';
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –∑–∞–≥—Ä—É–∑–∫–∏ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤ –≤ –º–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ
function loadDocuments(categoryType, modalId) {
    const category = libraryData[categoryType];
    if (!category) return;

    const modalBody = document.querySelector(`#${modalId} .documents-list`);
    if (!modalBody) return;

    let html = '';
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, –µ—Å—Ç—å –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç—ã
    if (!category.folders || category.folders.length === 0) {
        html = `
            <div class="empty-state">
                <div class="empty-icon">üìÇ</div>
                <div class="empty-title">–†–∞–∑–¥–µ–ª –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ</div>
                <div class="empty-description">–ù–æ–≤—ã–µ –¥–æ–∫—É–º–µ–Ω—Ç—ã –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ –±–ª–∏–∂–∞–π—à–µ–µ –≤—Ä–µ–º—è</div>
            </div>
        `;
        modalBody.innerHTML = html;
        return;
    }
    
    // –°–æ–∑–¥–∞–µ–º –≥—Ä—É–ø–ø—ã –ø–æ –ø–∞–ø–∫–∞–º
    category.folders.forEach(folder => {
        // –ó–∞–≥–æ–ª–æ–≤–æ–∫ –ø–∞–ø–∫–∏
        html += `
            <div class="folder-section">
                <div class="folder-header">
                    <span class="folder-icon">${folder.icon}</span>
                    <span class="folder-name">${folder.name}</span>
                    <span class="folder-count">${folder.files.length} —Ñ–∞–π–ª(–æ–≤)</span>
                </div>
                <div class="folder-files">
        `;
        
        // –§–∞–π–ª—ã –≤ –ø–∞–ø–∫–µ
        folder.files.forEach(file => {
            const iconColor = getFolderIconColor(categoryType);
            const isInfo = file.type.toLowerCase() === '–∏–Ω—Ñ–æ';
            const isFolder = file.type.toLowerCase() === '–ø–∞–ø–∫–∞';
            
            // –î–ª—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–æ–Ω–Ω—ã—Ö —ç–ª–µ–º–µ–Ω—Ç–æ–≤ –Ω–µ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –∫–Ω–æ–ø–∫–∏
            if (isInfo) {
                html += `
                    <div class="document-item info-item">
                        <div class="document-icon-small ${iconColor}">${getFileIcon(file.type)}</div>
                        <div class="document-details">
                            <div class="document-name">${file.name}</div>
                            <div class="document-meta">–î–æ—Å—Ç—É–ø–Ω–æ –≤ –ø–∞–ø–∫–µ: documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/</div>
                        </div>
                    </div>
                `;
            } else if (isFolder && file.isFolder) {
                // –î–ª—è –∞—Ä—Ö–∏–≤–æ–≤ —Å —É—á–µ–±–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
                const zipFileName = file.path.split('/').pop(); // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –∏–∑ –ø—É—Ç–∏
                html += `
                    <div class="document-item">
                        <div class="document-icon-small ${iconColor}">${getFileIcon(file.type)}</div>
                        <div class="document-details">
                            <div class="document-name">${file.name}</div>
                            <div class="document-meta">${file.type} ‚Ä¢ ${file.size} ‚Ä¢ ${file.filesCount || ''}</div>
                        </div>
                        <div class="document-actions">
                            <button class="download-btn folder-btn" onclick="downloadDocument('${file.path}', '${zipFileName}')" title="–°–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤">
                                –°–∫–∞—á–∞—Ç—å
                            </button>
                        </div>
                    </div>
                `;
            } else {
                const buttonText = isFolder ? '–û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É' : '–°–∫–∞—á–∞—Ç—å';
                html += `
                    <div class="document-item">
                        <div class="document-icon-small ${iconColor}">${getFileIcon(file.type)}</div>
                        <div class="document-details">
                            <div class="document-name">${file.name}</div>
                            <div class="document-meta">${file.type} ‚Ä¢ ${file.size} ‚Ä¢ ${file.date}</div>
                        </div>
                        <div class="document-actions">
                            <button class="view-btn" onclick="viewDocument('${file.path}', '${file.name}')" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                üëÅÔ∏è
                            </button>
                            <button class="download-btn" onclick="downloadDocument('${file.path}', '${file.name}')" title="${buttonText}">
                                ${buttonText}
                            </button>
                        </div>
                    </div>
                `;
            }
        });
        
        html += `
                </div>
            </div>
        `;
    });

    modalBody.innerHTML = html;
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
function viewDocument(path, name) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø–∞–ø–∫–æ–π
    if (path.endsWith('/')) {
        // –î–ª—è –ø–∞–ø–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º —É–≤–µ–¥–æ–º–ª–µ–Ω–∏–µ
        alert('–û—Ç–∫—Ä–æ–π—Ç–µ –ø–∞–ø–∫—É –≤ —Ñ–∞–π–ª–æ–≤–æ–º –º–µ–Ω–µ–¥–∂–µ—Ä–µ:\n' + path);
        return;
    }
    
    // –ö–æ–¥–∏—Ä—É–µ–º –ø—É—Ç—å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –∏ –ø—Ä–æ–±–µ–ª–∞–º–∏
    const encodedPath = path.split('/').map(part => encodeURIComponent(part)).join('/');
    
    // –û—Ç–∫—Ä—ã–≤–∞–µ–º –¥–æ–∫—É–º–µ–Ω—Ç –≤ –Ω–æ–≤–æ–π –≤–∫–ª–∞–¥–∫–µ
    // –ë—Ä–∞—É–∑–µ—Ä —Å–∞–º —Ä–µ—à–∏—Ç: PDF –æ—Ç–∫—Ä–æ–µ—Ç—Å—è –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞, DOC/DOCX –æ—Ç–∫—Ä–æ—é—Ç—Å—è –≤ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∏–ª–∏ –±—É–¥—É—Ç —Å–∫–∞—á–∞–Ω—ã
    window.open(encodedPath, '_blank');
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Å–∫–∞—á–∏–≤–∞–Ω–∏—è –¥–æ–∫—É–º–µ–Ω—Ç–∞
function downloadDocument(path, name) {
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —è–≤–ª—è–µ—Ç—Å—è –ª–∏ —ç—Ç–æ –ø–∞–ø–∫–æ–π
    if (path.endsWith('/')) {
        // –î–ª—è –ø–∞–ø–æ–∫ –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—É—Ç—å
        alert('–ü–∞–ø–∫–∞ –Ω–∞—Ö–æ–¥–∏—Ç—Å—è –∑–¥–µ—Å—å:\n' + path);
        return;
    }
    
    // –ö–æ–¥–∏—Ä—É–µ–º –ø—É—Ç—å –¥–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å –∫–∏—Ä–∏–ª–ª–∏—Ü–µ–π –∏ –ø—Ä–æ–±–µ–ª–∞–º–∏
    const encodedPath = path.split('/').map(part => encodeURIComponent(part)).join('/');
    
    // –°–æ–∑–¥–∞–µ–º –≤—Ä–µ–º–µ–Ω–Ω—É—é —Å—Å—ã–ª–∫—É –∏ –∏–Ω–∏—Ü–∏–∏—Ä—É–µ–º —Å–∫–∞—á–∏–≤–∞–Ω–∏–µ
    const link = document.createElement('a');
    link.href = encodedPath;
    link.download = name || path.split('/').pop();
    link.style.display = 'none';
    document.body.appendChild(link);
    link.click();
    
    // –ù–µ–±–æ–ª—å—à–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞ –ø–µ—Ä–µ–¥ —É–¥–∞–ª–µ–Ω–∏–µ–º —Å—Å—ã–ª–∫–∏
    setTimeout(() => {
        document.body.removeChild(link);
    }, 100);
}

// –§—É–Ω–∫—Ü–∏—è –¥–ª—è –ø–æ–¥—Å—á–µ—Ç–∞ –æ–±—â–µ–≥–æ –∫–æ–ª–∏—á–µ—Å—Ç–≤–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
function getTotalDocumentsCount(categoryType) {
    const category = libraryData[categoryType];
    if (!category) return 0;
    
    let total = 0;
    category.folders.forEach(folder => {
        total += folder.files.length;
    });
    return total;
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∏—Å–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤
function setupSearch(modalId, categoryType) {
    const searchInput = document.querySelector(`#${modalId} .modal-search-input`);
    if (!searchInput) return;

    searchInput.addEventListener('input', function(e) {
        const searchTerm = e.target.value.toLowerCase();
        const category = libraryData[categoryType];
        if (!category) return;

        const modalBody = document.querySelector(`#${modalId} .documents-list`);
        let html = '';

        category.folders.forEach(folder => {
            const filteredFiles = folder.files.filter(file => 
                file.name.toLowerCase().includes(searchTerm)
            );

            if (filteredFiles.length > 0) {
                const iconColor = getFolderIconColor(categoryType);
                html += `
                    <div class="folder-section">
                        <div class="folder-header">
                            <span class="folder-icon">${folder.icon}</span>
                            <span class="folder-name">${folder.name}</span>
                            <span class="folder-count">${filteredFiles.length} —Ñ–∞–π–ª(–æ–≤)</span>
                        </div>
                        <div class="folder-files">
                `;

                filteredFiles.forEach(file => {
                    const isInfo = file.type.toLowerCase() === '–∏–Ω—Ñ–æ';
                    const isFolder = file.type.toLowerCase() === '–ø–∞–ø–∫–∞';
                    
                    if (isInfo) {
                        html += `
                            <div class="document-item info-item">
                                <div class="document-icon-small ${iconColor}">${getFileIcon(file.type)}</div>
                                <div class="document-details">
                                    <div class="document-name">${file.name}</div>
                                    <div class="document-meta">–î–æ—Å—Ç—É–ø–Ω–æ –≤ –ø–∞–ø–∫–µ: documents/–£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞–º–∏/</div>
                                </div>
                            </div>
                        `;
                    } else if (isFolder && file.isFolder) {
                        // –î–ª—è –∞—Ä—Ö–∏–≤–æ–≤ —Å —É—á–µ–±–Ω—ã–º–∏ –º–∞—Ç–µ—Ä–∏–∞–ª–∞–º–∏
                        const zipFileName = file.path.split('/').pop(); // –ü–æ–ª—É—á–∞–µ–º –∏–º—è —Ñ–∞–π–ª–∞ –∏–∑ –ø—É—Ç–∏
                        html += `
                            <div class="document-item">
                                <div class="document-icon-small ${iconColor}">${getFileIcon(file.type)}</div>
                                <div class="document-details">
                                    <div class="document-name">${file.name}</div>
                                    <div class="document-meta">${file.type} ‚Ä¢ ${file.size} ‚Ä¢ ${file.filesCount || ''}</div>
                                </div>
                                <div class="document-actions">
                                    <button class="download-btn folder-btn" onclick="downloadDocument('${file.path}', '${zipFileName}')" title="–°–∫–∞—á–∞—Ç—å –∞—Ä—Ö–∏–≤">
                                        –°–∫–∞—á–∞—Ç—å
                                    </button>
                                </div>
                            </div>
                        `;
                    } else {
                        const buttonText = isFolder ? '–û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É' : '–°–∫–∞—á–∞—Ç—å';
                        html += `
                            <div class="document-item">
                                <div class="document-icon-small ${iconColor}">${getFileIcon(file.type)}</div>
                                <div class="document-details">
                                    <div class="document-name">${file.name}</div>
                                    <div class="document-meta">${file.type} ‚Ä¢ ${file.size} ‚Ä¢ ${file.date}</div>
                                </div>
                                <div class="document-actions">
                                    <button class="view-btn" onclick="viewDocument('${file.path}', '${file.name}')" title="–ü—Ä–æ—Å–º–æ—Ç—Ä">
                                        üëÅÔ∏è
                                    </button>
                                    <button class="download-btn" onclick="downloadDocument('${file.path}', '${file.name}')" title="${buttonText}">
                                        ${buttonText}
                                    </button>
                                </div>
                            </div>
                        `;
                    }
                });

                html += `
                        </div>
                    </div>
                `;
            }
        });

        if (html === '') {
            html = '<div class="no-results">–î–æ–∫—É–º–µ–Ω—Ç—ã –Ω–µ –Ω–∞–π–¥–µ–Ω—ã</div>';
        }

        modalBody.innerHTML = html;
    });
}

// –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –ø—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
document.addEventListener('DOMContentLoaded', function() {
    // –û–±–Ω–æ–≤–ª—è–µ–º —Å—á–µ—Ç—á–∏–∫–∏ –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–∞—Ö
    const normativeCard = document.querySelector('#card-normative .card-badge');
    if (normativeCard) {
        const count = getTotalDocumentsCount('normative');
        normativeCard.textContent = count > 0 ? `${count} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤` : '–°–∫–æ—Ä–æ';
    }

    const standardsCard = document.querySelector('#card-standards .card-badge');
    if (standardsCard) {
        const count = getTotalDocumentsCount('standards');
        standardsCard.textContent = count > 0 ? `${count} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤` : '–°–∫–æ—Ä–æ';
    }

    const itemsCard = document.querySelector('#card-items .card-badge');
    if (itemsCard) {
        const count = getTotalDocumentsCount('items');
        itemsCard.textContent = count > 0 ? `${count} –¥–æ–∫—É–º–µ–Ω—Ç–æ–≤` : '–°–∫–æ—Ä–æ';
    }
});

// –§—É–Ω–∫—Ü–∏—è –æ—Ç–∫—Ä—ã—Ç–∏—è –º–æ–¥–∞–ª—å–Ω–æ–≥–æ –æ–∫–Ω–∞ —Å –∑–∞–≥—Ä—É–∑–∫–æ–π –¥–∞–Ω–Ω—ã—Ö
function openModalWithData(modalId, categoryType) {
    loadDocuments(categoryType, modalId);
    setupSearch(modalId, categoryType);
    
    document.getElementById(modalId).style.display = 'flex';
    setTimeout(() => {
        document.querySelector(`#${modalId} .modal-content`).classList.add('show');
    }, 10);
}

// –§—É–Ω–∫—Ü–∏—è –ø–æ–∫–∞–∑–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ–± –∞—Ä—Ö–∏–≤–µ
function showArchiveInfo(archiveName, filesCount) {
    alert('üì¶ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ–± –∞—Ä—Ö–∏–≤–µ\n\n' + 
          'üìÅ ' + archiveName + '\n\n' + 
          'üìä –°–æ–¥–µ—Ä–∂–∏–º–æ–µ: ' + filesCount + ' —É—á–µ–±–Ω—ã—Ö –º–∞—Ç–µ—Ä–∏–∞–ª–æ–≤ (PNG)\n\n' + 
          'üí° –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:\n' +
          '1. –ù–∞–∂–º–∏—Ç–µ –∫–Ω–æ–ø–∫—É "–°–∫–∞—á–∞—Ç—å ZIP"\n' +
          '2. –°–æ—Ö—Ä–∞–Ω–∏—Ç–µ –∞—Ä—Ö–∏–≤ –Ω–∞ –∫–æ–º–ø—å—é—Ç–µ—Ä–µ\n' +
          '3. –†–∞—Å–ø–∞–∫—É–π—Ç–µ ZIP-–∞—Ä—Ö–∏–≤\n' +
          '4. –ü—Ä–æ—Å–º–∞—Ç—Ä–∏–≤–∞–π—Ç–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –≤ –ª—é–±–æ–º –ø–æ—Ä—è–¥–∫–µ\n\n' +
          '‚úÖ –í—Å–µ —É—á–µ–±–Ω—ã–µ –º–∞—Ç–µ—Ä–∏–∞–ª—ã –±—É–¥—É—Ç –¥–æ—Å—Ç—É–ø–Ω—ã –ø–æ—Å–ª–µ —Ä–∞—Å–ø–∞–∫–æ–≤–∫–∏!');
}

